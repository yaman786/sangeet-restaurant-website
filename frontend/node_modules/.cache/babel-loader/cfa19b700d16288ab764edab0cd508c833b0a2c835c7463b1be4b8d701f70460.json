{"ast":null,"code":"import React,{useState}from'react';import{motion,AnimatePresence}from'framer-motion';import{toast}from'react-hot-toast';import{submitReview}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ReviewModal=_ref=>{let{isOpen,onClose,order,customerName,tableNumber,onReviewSubmitted}=_ref;const[rating,setRating]=useState(0);const[hoverRating,setHoverRating]=useState(0);const[reviewText,setReviewText]=useState('');const[isSubmitting,setIsSubmitting]=useState(false);const handleSubmit=async()=>{if(rating===0){toast.error('Please select a rating');return;}setIsSubmitting(true);try{await submitReview({customer_name:customerName,review_text:reviewText,rating:rating,order_id:order.id,table_number:tableNumber});toast.success('Thank you for your review! üéâ');onReviewSubmitted();onClose();}catch(error){console.error('Error submitting review:',error);toast.error('Failed to submit review. Please try again.');}finally{setIsSubmitting(false);}};const handleSkip=()=>{onClose();toast.success('Review skipped. You can review later!');};if(!isOpen)return null;return/*#__PURE__*/_jsx(AnimatePresence,{children:/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",onClick:onClose,children:/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,scale:0.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:0.9,y:20},className:\"bg-gradient-to-br from-sangeet-neutral-900 to-sangeet-neutral-800 rounded-2xl p-8 border border-sangeet-neutral-700 max-w-md w-full\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-4xl mb-4\",children:\"\\uD83C\\uDF7D\\uFE0F\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-sangeet-400 mb-2\",children:\"How was your meal?\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sangeet-neutral-300\",children:\"We'd love to hear about your experience!\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sangeet-neutral-200 font-medium mb-3 text-center\",children:\"Rate your experience\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center space-x-2\",children:[1,2,3,4,5].map(star=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setRating(star),onMouseEnter:()=>setHoverRating(star),onMouseLeave:()=>setHoverRating(0),className:\"text-3xl transition-all duration-200 hover:scale-110\",children:/*#__PURE__*/_jsx(\"span\",{className:\"\\n                    \".concat(hoverRating>=star||rating>=star?'text-yellow-400':'text-sangeet-neutral-600',\"\\n                  \"),children:\"\\u2605\"})},star))}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-sm text-sangeet-neutral-400 mt-2\",children:[rating===0&&'Tap to rate',rating===1&&'Poor',rating===2&&'Fair',rating===3&&'Good',rating===4&&'Very Good',rating===5&&'Excellent!']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sangeet-neutral-200 font-medium mb-2\",children:\"Tell us more (optional)\"}),/*#__PURE__*/_jsx(\"textarea\",{value:reviewText,onChange:e=>setReviewText(e.target.value),placeholder:\"Share your thoughts about the food, service, or anything else...\",className:\"w-full h-24 bg-sangeet-neutral-800 border border-sangeet-neutral-700 rounded-xl p-3 text-sangeet-neutral-200 placeholder-sangeet-neutral-500 focus:outline-none focus:border-sangeet-400 resize-none\",maxLength:500}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-sangeet-neutral-500 text-right mt-1\",children:[reviewText.length,\"/500\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSkip,disabled:isSubmitting,className:\"flex-1 bg-sangeet-neutral-700 hover:bg-sangeet-neutral-600 text-sangeet-neutral-200 font-medium py-3 px-4 rounded-xl transition-colors duration-200 disabled:opacity-50\",children:\"Review Later\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:isSubmitting||rating===0,className:\"flex-1 bg-gradient-to-r from-sangeet-400 to-sangeet-500 hover:from-sangeet-500 hover:to-sangeet-600 text-sangeet-neutral-950 font-medium py-3 px-4 rounded-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed\",children:isSubmitting?/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 border-2 border-sangeet-neutral-950 border-t-transparent rounded-full animate-spin mr-2\"}),\"Submitting...\"]}):'Submit Review'})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"absolute top-4 right-4 text-sangeet-neutral-400 hover:text-sangeet-neutral-200 text-2xl transition-colors duration-200\",children:\"\\xD7\"})]})})});};export default ReviewModal;","map":{"version":3,"names":["React","useState","motion","AnimatePresence","toast","submitReview","jsx","_jsx","jsxs","_jsxs","ReviewModal","_ref","isOpen","onClose","order","customerName","tableNumber","onReviewSubmitted","rating","setRating","hoverRating","setHoverRating","reviewText","setReviewText","isSubmitting","setIsSubmitting","handleSubmit","error","customer_name","review_text","order_id","id","table_number","success","console","handleSkip","children","div","initial","opacity","animate","exit","className","onClick","scale","y","e","stopPropagation","map","star","onMouseEnter","onMouseLeave","concat","value","onChange","target","placeholder","maxLength","length","disabled"],"sources":["/Users/amanrana/Desktop/sangeet_restaurant_website/frontend/src/components/ReviewModal.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { toast } from 'react-hot-toast';\nimport { submitReview } from '../services/api';\n\nconst ReviewModal = ({ \n  isOpen, \n  onClose, \n  order, \n  customerName, \n  tableNumber,\n  onReviewSubmitted \n}) => {\n  const [rating, setRating] = useState(0);\n  const [hoverRating, setHoverRating] = useState(0);\n  const [reviewText, setReviewText] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const handleSubmit = async () => {\n    if (rating === 0) {\n      toast.error('Please select a rating');\n      return;\n    }\n\n    setIsSubmitting(true);\n    try {\n      await submitReview({\n        customer_name: customerName,\n        review_text: reviewText,\n        rating: rating,\n        order_id: order.id,\n        table_number: tableNumber\n      });\n\n      toast.success('Thank you for your review! üéâ');\n      onReviewSubmitted();\n      onClose();\n    } catch (error) {\n      console.error('Error submitting review:', error);\n      toast.error('Failed to submit review. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleSkip = () => {\n    onClose();\n    toast.success('Review skipped. You can review later!');\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n        onClick={onClose}\n      >\n        <motion.div\n          initial={{ opacity: 0, scale: 0.9, y: 20 }}\n          animate={{ opacity: 1, scale: 1, y: 0 }}\n          exit={{ opacity: 0, scale: 0.9, y: 20 }}\n          className=\"bg-gradient-to-br from-sangeet-neutral-900 to-sangeet-neutral-800 rounded-2xl p-8 border border-sangeet-neutral-700 max-w-md w-full\"\n          onClick={(e) => e.stopPropagation()}\n        >\n          {/* Header */}\n          <div className=\"text-center mb-6\">\n            <div className=\"text-4xl mb-4\">üçΩÔ∏è</div>\n            <h2 className=\"text-2xl font-bold text-sangeet-400 mb-2\">\n              How was your meal?\n            </h2>\n            <p className=\"text-sangeet-neutral-300\">\n              We'd love to hear about your experience!\n            </p>\n          </div>\n\n\n\n          {/* Star Rating */}\n          <div className=\"mb-6\">\n            <p className=\"text-sangeet-neutral-200 font-medium mb-3 text-center\">\n              Rate your experience\n            </p>\n            <div className=\"flex justify-center space-x-2\">\n              {[1, 2, 3, 4, 5].map((star) => (\n                <button\n                  key={star}\n                  onClick={() => setRating(star)}\n                  onMouseEnter={() => setHoverRating(star)}\n                  onMouseLeave={() => setHoverRating(0)}\n                  className=\"text-3xl transition-all duration-200 hover:scale-110\"\n                >\n                  <span className={`\n                    ${(hoverRating >= star || rating >= star) \n                      ? 'text-yellow-400' \n                      : 'text-sangeet-neutral-600'\n                    }\n                  `}>\n                    ‚òÖ\n                  </span>\n                </button>\n              ))}\n            </div>\n            <p className=\"text-center text-sm text-sangeet-neutral-400 mt-2\">\n              {rating === 0 && 'Tap to rate'}\n              {rating === 1 && 'Poor'}\n              {rating === 2 && 'Fair'}\n              {rating === 3 && 'Good'}\n              {rating === 4 && 'Very Good'}\n              {rating === 5 && 'Excellent!'}\n            </p>\n          </div>\n\n          {/* Review Text */}\n          <div className=\"mb-6\">\n            <label className=\"block text-sangeet-neutral-200 font-medium mb-2\">\n              Tell us more (optional)\n            </label>\n            <textarea\n              value={reviewText}\n              onChange={(e) => setReviewText(e.target.value)}\n              placeholder=\"Share your thoughts about the food, service, or anything else...\"\n              className=\"w-full h-24 bg-sangeet-neutral-800 border border-sangeet-neutral-700 rounded-xl p-3 text-sangeet-neutral-200 placeholder-sangeet-neutral-500 focus:outline-none focus:border-sangeet-400 resize-none\"\n              maxLength={500}\n            />\n            <p className=\"text-xs text-sangeet-neutral-500 text-right mt-1\">\n              {reviewText.length}/500\n            </p>\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"flex space-x-3\">\n            <button\n              onClick={handleSkip}\n              disabled={isSubmitting}\n              className=\"flex-1 bg-sangeet-neutral-700 hover:bg-sangeet-neutral-600 text-sangeet-neutral-200 font-medium py-3 px-4 rounded-xl transition-colors duration-200 disabled:opacity-50\"\n            >\n              Review Later\n            </button>\n            <button\n              onClick={handleSubmit}\n              disabled={isSubmitting || rating === 0}\n              className=\"flex-1 bg-gradient-to-r from-sangeet-400 to-sangeet-500 hover:from-sangeet-500 hover:to-sangeet-600 text-sangeet-neutral-950 font-medium py-3 px-4 rounded-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isSubmitting ? (\n                <span className=\"flex items-center justify-center\">\n                  <div className=\"w-4 h-4 border-2 border-sangeet-neutral-950 border-t-transparent rounded-full animate-spin mr-2\"></div>\n                  Submitting...\n                </span>\n              ) : (\n                'Submit Review'\n              )}\n            </button>\n          </div>\n\n          {/* Close Button */}\n          <button\n            onClick={onClose}\n            className=\"absolute top-4 right-4 text-sangeet-neutral-400 hover:text-sangeet-neutral-200 text-2xl transition-colors duration-200\"\n          >\n            √ó\n          </button>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n};\n\nexport default ReviewModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}