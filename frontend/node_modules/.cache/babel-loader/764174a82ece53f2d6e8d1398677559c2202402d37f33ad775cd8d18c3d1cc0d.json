{"ast":null,"code":"import _objectSpread from\"/Users/amanrana/Desktop/sangeet_restaurant_website/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{motion}from'framer-motion';import{useParams,useNavigate}from'react-router-dom';import{createOrder,getTableByQRCode}from'../services/api';import socketService from'../services/socketService';import toast from'react-hot-toast';import{clearCartData}from'../utils/cartUtils';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const QRCartPage=()=>{const{qrCode}=useParams();const navigate=useNavigate();const[loading,setLoading]=useState(true);const[cart,setCart]=useState([]);const[tableInfo,setTableInfo]=useState(null);const[customerName,setCustomerName]=useState('');const[specialInstructions,setSpecialInstructions]=useState('');const[isSubmitting,setIsSubmitting]=useState(false);const[cartInitialized,setCartInitialized]=useState(false);useEffect(()=>{const loadData=async()=>{try{setLoading(true);// Get table information from QR code\nconst tableData=await getTableByQRCode(qrCode);if(!tableData){toast.error('Invalid QR code. Please scan a valid table QR code.');navigate('/');return;}setTableInfo(tableData);// Add a small delay to ensure component is ready\nawait new Promise(resolve=>setTimeout(resolve,100));// Load cart from localStorage\nconst savedCart=localStorage.getItem(\"cart_\".concat(qrCode));if(savedCart){try{const parsedCart=JSON.parse(savedCart);// Validate cart data structure\nif(Array.isArray(parsedCart)&&parsedCart.length>0){setCart(parsedCart);}else{setCart([]);}}catch(error){console.error('‚ùå Error parsing cart data:',error);setCart([]);}}else{setCart([]);}// Mark cart as initialized\nsetCartInitialized(true);// Cart loading is complete\n// Load customer info from localStorage\nconst savedCustomerName=localStorage.getItem(\"customer_\".concat(qrCode));if(savedCustomerName){setCustomerName(savedCustomerName);}const savedInstructions=localStorage.getItem(\"instructions_\".concat(qrCode));if(savedInstructions){setSpecialInstructions(savedInstructions);}}catch(error){console.error('Error loading data:',error);toast.error('Failed to load cart. Please try again.');}finally{setLoading(false);}};loadData();},[qrCode,navigate]);// Save cart to localStorage whenever it changes\nuseEffect(()=>{// Only run after cart has been initialized\nif(!cartInitialized){return;}// Only save/remove if cart has been loaded (not initial empty state)\nif(cart.length>0){localStorage.setItem(\"cart_\".concat(qrCode),JSON.stringify(cart));}else{// Only remove if there was previously saved cart data\nconst savedCart=localStorage.getItem(\"cart_\".concat(qrCode));if(savedCart){localStorage.removeItem(\"cart_\".concat(qrCode));}}},[cart,qrCode,cartInitialized]);// Save customer info to localStorage\nuseEffect(()=>{if(customerName){localStorage.setItem(\"customer_\".concat(qrCode),customerName);}if(specialInstructions){localStorage.setItem(\"instructions_\".concat(qrCode),specialInstructions);}},[customerName,specialInstructions,qrCode]);// Socket connection and order deletion listener\nuseEffect(()=>{// Connect to socket service\nsocketService.connect();// Join table room for order notifications\nif(tableInfo!==null&&tableInfo!==void 0&&tableInfo.table_number){socketService.joinTable(tableInfo.table_number);}// Listen for order deletion events\nconst handleOrderDeleted=data=>{// Check if this deletion affects our table\nif(data.tableNumber&&tableInfo!==null&&tableInfo!==void 0&&tableInfo.table_number&&data.tableNumber.toString()===tableInfo.table_number.toString()){// Clear cart state\nsetCart([]);// Use the cart utility function for comprehensive clearing\nconst success=clearCartData(qrCode,tableInfo.table_number);if(success){toast.success('Previous order has been cancelled. Your cart has been cleared.');// Redirect back to menu\nnavigate(\"/qr/\".concat(qrCode));}else{console.error('‚ùå Failed to clear cart data');}}};socketService.onOrderDeleted(handleOrderDeleted);// Cleanup function\nreturn()=>{socketService.removeListener('order-deleted');};},[tableInfo,qrCode,navigate]);const updateQuantity=(itemId,quantity)=>{if(quantity<=0){setCart(prevCart=>prevCart.filter(item=>item.menu_item_id!==itemId));return;}setCart(prevCart=>prevCart.map(item=>item.menu_item_id===itemId?_objectSpread(_objectSpread({},item),{},{quantity}):item));};const removeFromCart=itemId=>{setCart(prevCart=>prevCart.filter(item=>item.menu_item_id!==itemId));};const getTotalAmount=()=>{return cart.reduce((total,item)=>total+parseFloat(item.price)*item.quantity,0);};const handleSubmitOrder=async()=>{if(!customerName.trim()){toast.error('Please enter your name');return;}if(cart.length===0){toast.error('Your cart is empty');return;}try{var _orderResponse$order,_orderResponse$order2;setIsSubmitting(true);const orderData={table_id:tableInfo.id,customer_name:customerName.trim(),special_instructions:specialInstructions.trim(),items:cart.map(item=>({menu_item_id:item.menu_item_id,quantity:item.quantity,special_requests:item.special_requests||''}))};console.log('=== ORDER SUBMISSION DEBUG ===');console.log('Order data being sent:',orderData);console.log('Cart data:',cart);console.log('Table info:',tableInfo);const orderResponse=await createOrder(orderData);console.log('‚úÖ Order response received:',orderResponse);console.log('üìã Full order response structure:',JSON.stringify(orderResponse,null,2));const orderId=orderResponse===null||orderResponse===void 0?void 0:(_orderResponse$order=orderResponse.order)===null||_orderResponse$order===void 0?void 0:_orderResponse$order.id;const orderNumber=orderResponse===null||orderResponse===void 0?void 0:(_orderResponse$order2=orderResponse.order)===null||_orderResponse$order2===void 0?void 0:_orderResponse$order2.order_number;const isMerged=(orderResponse===null||orderResponse===void 0?void 0:orderResponse.merged)||false;console.log('üìã Extracted order details:',{orderId,orderNumber,isMerged});if(!orderId){console.error('‚ùå No order ID found in response');throw new Error('Order ID not found in response');}// Clear cart and customer info after successful order\nsetCart([]);setCustomerName('');setSpecialInstructions('');localStorage.removeItem(\"cart_\".concat(qrCode));localStorage.removeItem(\"customer_\".concat(qrCode));localStorage.removeItem(\"instructions_\".concat(qrCode));// Show appropriate success message based on whether items were merged\nif(isMerged){toast.success('Items added to your existing order successfully!');}else{toast.success('Order placed successfully!');}// Navigate to unified dashboard page\nconst dashboardUrl=\"/dashboard?orderId=\".concat(orderId,\"&table=\").concat(tableInfo===null||tableInfo===void 0?void 0:tableInfo.table_number,\"&customerName=\").concat(encodeURIComponent(customerName),\"&orderNumber=\").concat(orderNumber||'',\"&totalAmount=\").concat(getTotalAmount().toFixed(2));console.log('üöÄ Navigating to:',dashboardUrl);window.location.href=dashboardUrl;}catch(error){var _error$response,_error$response2,_error$response3,_error$response3$data;console.error('Error placing order:',error);console.error('Error response:',(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data);console.error('Error status:',(_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status);toast.error(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||'Failed to place order. Please try again.');}finally{setIsSubmitting(false);}};const handleContinueShopping=()=>{navigate(\"/qr/\".concat(qrCode));};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-sangeet-neutral-950 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sangeet-400\",children:\"Loading your cart...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-sangeet-neutral-950\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-sangeet-neutral-900 to-sangeet-neutral-800 border-b border-sangeet-neutral-700 p-4 sticky top-0 z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleContinueShopping,className:\"w-10 h-10 bg-sangeet-neutral-700 rounded-full flex items-center justify-center hover:bg-sangeet-neutral-600 transition-colors\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-sangeet-400 text-lg\",children:\"\\u2190\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-sangeet-400\",children:\"Your Cart\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sangeet-neutral-400 text-sm\",children:[\"Table \",tableInfo===null||tableInfo===void 0?void 0:tableInfo.table_number,\" \\u2022 \",cart.length,\" item\",cart.length!==1?'s':'']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sangeet-400 font-bold text-lg\",children:[\"$\",getTotalAmount().toFixed(2)]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sangeet-neutral-400 text-sm\",children:\"Total Amount\"})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-sangeet-neutral-900 to-sangeet-neutral-800 rounded-xl p-6 mb-6 border border-sangeet-neutral-700\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-semibold text-sangeet-400 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",children:\"\\uD83D\\uDC64\"}),\"Your Information\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sangeet-neutral-300 text-sm mb-2 font-medium\",children:\"Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:customerName,onChange:e=>setCustomerName(e.target.value),className:\"w-full px-4 py-3 bg-sangeet-neutral-800 border border-sangeet-neutral-600 rounded-lg text-sangeet-300 focus:outline-none focus:border-sangeet-400 focus:ring-2 focus:ring-sangeet-400/20 transition-all\",placeholder:\"Enter your name\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sangeet-neutral-300 text-sm mb-2 font-medium\",children:\"Special Instructions\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:specialInstructions,onChange:e=>setSpecialInstructions(e.target.value),className:\"w-full px-4 py-3 bg-sangeet-neutral-800 border border-sangeet-neutral-600 rounded-lg text-sangeet-300 focus:outline-none focus:border-sangeet-400 focus:ring-2 focus:ring-sangeet-400/20 transition-all\",placeholder:\"Any special requests?\"})]})]})]}),cart.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl mb-4\",children:\"\\uD83D\\uDED2\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-sangeet-400 mb-2\",children:\"Your cart is empty\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sangeet-neutral-400 mb-6\",children:\"Add some delicious items to get started!\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleContinueShopping,className:\"bg-sangeet-400 text-sangeet-neutral-950 px-8 py-3 rounded-lg font-semibold hover:bg-sangeet-300 transition-colors shadow-lg hover:shadow-xl\",children:\"Continue Shopping\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-sangeet-neutral-900 to-sangeet-neutral-800 rounded-xl p-6 mb-6 border border-sangeet-neutral-700\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-semibold text-sangeet-400 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",children:\"\\uD83C\\uDF7D\\uFE0F\"}),\"Your Order Items\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:cart.map(item=>/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"flex items-center justify-between bg-sangeet-neutral-800 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sangeet-400 font-semibold\",children:item.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sangeet-neutral-400 text-sm\",children:[\"$\",item.price,\" each\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateQuantity(item.menu_item_id,item.quantity-1),className:\"w-8 h-8 bg-sangeet-neutral-700 text-sangeet-400 rounded-full flex items-center justify-center hover:bg-sangeet-neutral-600 transition-colors\",children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sangeet-400 font-medium w-8 text-center\",children:item.quantity}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateQuantity(item.menu_item_id,item.quantity+1),className:\"w-8 h-8 bg-sangeet-neutral-700 text-sangeet-400 rounded-full flex items-center justify-center hover:bg-sangeet-neutral-600 transition-colors\",children:\"+\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-sangeet-400 font-semibold\",children:[\"$\",(parseFloat(item.price)*item.quantity).toFixed(2)]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFromCart(item.menu_item_id),className:\"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center hover:bg-red-700 transition-colors\",children:\"\\xD7\"})]})]},item.menu_item_id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-sangeet-neutral-900 to-sangeet-neutral-800 rounded-xl p-6 mb-6 border border-sangeet-neutral-700\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg font-semibold text-sangeet-400 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",children:\"\\uD83D\\uDCCB\"}),\"Order Summary\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sangeet-neutral-400\",children:[\"Items (\",cart.length,\")\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sangeet-400\",children:cart.reduce((total,item)=>total+item.quantity,0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sangeet-neutral-400\",children:\"Subtotal\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sangeet-400\",children:[\"$\",getTotalAmount().toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-sangeet-neutral-700 pt-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sangeet-400 font-semibold\",children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sangeet-400 font-bold text-xl\",children:[\"$\",getTotalAmount().toFixed(2)]})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleContinueShopping,className:\"flex-1 bg-sangeet-neutral-700 text-sangeet-400 px-8 py-4 rounded-lg font-semibold hover:bg-sangeet-neutral-600 transition-colors\",children:\"Continue Shopping\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmitOrder,disabled:isSubmitting||cart.length===0,className:\"flex-1 bg-sangeet-400 text-sangeet-neutral-950 px-8 py-4 rounded-lg font-semibold hover:bg-sangeet-300 transition-colors disabled:opacity-50 shadow-lg hover:shadow-xl\",children:isSubmitting?'Placing Order...':'Place Order'})]})]})]})]});};export default QRCartPage;","map":{"version":3,"names":["React","useState","useEffect","motion","useParams","useNavigate","createOrder","getTableByQRCode","socketService","toast","clearCartData","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","QRCartPage","qrCode","navigate","loading","setLoading","cart","setCart","tableInfo","setTableInfo","customerName","setCustomerName","specialInstructions","setSpecialInstructions","isSubmitting","setIsSubmitting","cartInitialized","setCartInitialized","loadData","tableData","error","Promise","resolve","setTimeout","savedCart","localStorage","getItem","concat","parsedCart","JSON","parse","Array","isArray","length","console","savedCustomerName","savedInstructions","setItem","stringify","removeItem","connect","table_number","joinTable","handleOrderDeleted","data","tableNumber","toString","success","onOrderDeleted","removeListener","updateQuantity","itemId","quantity","prevCart","filter","item","menu_item_id","map","_objectSpread","removeFromCart","getTotalAmount","reduce","total","parseFloat","price","handleSubmitOrder","trim","_orderResponse$order","_orderResponse$order2","orderData","table_id","id","customer_name","special_instructions","items","special_requests","log","orderResponse","orderId","order","orderNumber","order_number","isMerged","merged","Error","dashboardUrl","encodeURIComponent","toFixed","window","location","href","_error$response","_error$response2","_error$response3","_error$response3$data","response","status","handleContinueShopping","className","children","onClick","type","value","onChange","e","target","placeholder","div","initial","opacity","y","animate","name","disabled"],"sources":["/Users/amanrana/Desktop/sangeet_restaurant_website/frontend/src/pages/QRCartPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { createOrder, getTableByQRCode } from '../services/api';\nimport socketService from '../services/socketService';\nimport toast from 'react-hot-toast';\nimport { clearCartData } from '../utils/cartUtils';\n\nconst QRCartPage = () => {\n  const { qrCode } = useParams();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(true);\n  const [cart, setCart] = useState([]);\n  const [tableInfo, setTableInfo] = useState(null);\n  const [customerName, setCustomerName] = useState('');\n  const [specialInstructions, setSpecialInstructions] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [cartInitialized, setCartInitialized] = useState(false);\n\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        setLoading(true);\n        \n        // Get table information from QR code\n        const tableData = await getTableByQRCode(qrCode);\n        if (!tableData) {\n          toast.error('Invalid QR code. Please scan a valid table QR code.');\n          navigate('/');\n          return;\n        }\n        setTableInfo(tableData);\n\n        // Add a small delay to ensure component is ready\n        await new Promise(resolve => setTimeout(resolve, 100));\n\n        // Load cart from localStorage\n        \n        \n        const savedCart = localStorage.getItem(`cart_${qrCode}`);\n\n        \n        if (savedCart) {\n          try {\n            const parsedCart = JSON.parse(savedCart);\n            // Validate cart data structure\n            if (Array.isArray(parsedCart) && parsedCart.length > 0) {\n              setCart(parsedCart);\n            } else {\n              setCart([]);\n            }\n          } catch (error) {\n            console.error('‚ùå Error parsing cart data:', error);\n            setCart([]);\n          }\n        } else {\n          setCart([]);\n        }\n\n        // Mark cart as initialized\n        setCartInitialized(true);\n\n        // Cart loading is complete\n\n        // Load customer info from localStorage\n        const savedCustomerName = localStorage.getItem(`customer_${qrCode}`);\n        if (savedCustomerName) {\n          setCustomerName(savedCustomerName);\n        }\n\n        const savedInstructions = localStorage.getItem(`instructions_${qrCode}`);\n        if (savedInstructions) {\n          setSpecialInstructions(savedInstructions);\n        }\n\n      } catch (error) {\n        console.error('Error loading data:', error);\n        toast.error('Failed to load cart. Please try again.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadData();\n  }, [qrCode, navigate]);\n\n  // Save cart to localStorage whenever it changes\n  useEffect(() => {\n    // Only run after cart has been initialized\n    if (!cartInitialized) {\n      return;\n    }\n    \n    // Only save/remove if cart has been loaded (not initial empty state)\n    if (cart.length > 0) {\n      localStorage.setItem(`cart_${qrCode}`, JSON.stringify(cart));\n    } else {\n      // Only remove if there was previously saved cart data\n      const savedCart = localStorage.getItem(`cart_${qrCode}`);\n      if (savedCart) {\n        localStorage.removeItem(`cart_${qrCode}`);\n      }\n    }\n  }, [cart, qrCode, cartInitialized]);\n\n  // Save customer info to localStorage\n  useEffect(() => {\n    if (customerName) {\n      localStorage.setItem(`customer_${qrCode}`, customerName);\n    }\n    if (specialInstructions) {\n      localStorage.setItem(`instructions_${qrCode}`, specialInstructions);\n    }\n  }, [customerName, specialInstructions, qrCode]);\n\n  // Socket connection and order deletion listener\n  useEffect(() => {\n    // Connect to socket service\n    socketService.connect();\n    \n    // Join table room for order notifications\n    if (tableInfo?.table_number) {\n      socketService.joinTable(tableInfo.table_number);\n    }\n\n    // Listen for order deletion events\n    const handleOrderDeleted = (data) => {\n      \n      \n      // Check if this deletion affects our table\n      if (data.tableNumber && tableInfo?.table_number && \n          data.tableNumber.toString() === tableInfo.table_number.toString()) {\n        \n        \n        \n        // Clear cart state\n        setCart([]);\n        \n        // Use the cart utility function for comprehensive clearing\n        const success = clearCartData(qrCode, tableInfo.table_number);\n        \n        if (success) {\n\n          toast.success('Previous order has been cancelled. Your cart has been cleared.');\n          \n          // Redirect back to menu\n          navigate(`/qr/${qrCode}`);\n        } else {\n          console.error('‚ùå Failed to clear cart data');\n        }\n      }\n    };\n\n    socketService.onOrderDeleted(handleOrderDeleted);\n\n    // Cleanup function\n    return () => {\n      socketService.removeListener('order-deleted');\n    };\n  }, [tableInfo, qrCode, navigate]);\n\n  const updateQuantity = (itemId, quantity) => {\n    if (quantity <= 0) {\n      setCart(prevCart => prevCart.filter(item => item.menu_item_id !== itemId));\n      return;\n    }\n    setCart(prevCart =>\n      prevCart.map(item =>\n        item.menu_item_id === itemId\n          ? { ...item, quantity }\n          : item\n      )\n    );\n  };\n\n  const removeFromCart = (itemId) => {\n    setCart(prevCart => prevCart.filter(item => item.menu_item_id !== itemId));\n  };\n\n  const getTotalAmount = () => {\n    return cart.reduce((total, item) => total + (parseFloat(item.price) * item.quantity), 0);\n  };\n\n  const handleSubmitOrder = async () => {\n    if (!customerName.trim()) {\n      toast.error('Please enter your name');\n      return;\n    }\n\n    if (cart.length === 0) {\n      toast.error('Your cart is empty');\n      return;\n    }\n\n    try {\n      setIsSubmitting(true);\n      \n      const orderData = {\n        table_id: tableInfo.id,\n        customer_name: customerName.trim(),\n        special_instructions: specialInstructions.trim(),\n        items: cart.map(item => ({\n          menu_item_id: item.menu_item_id,\n          quantity: item.quantity,\n          special_requests: item.special_requests || ''\n        }))\n      };\n\n      console.log('=== ORDER SUBMISSION DEBUG ===');\n      console.log('Order data being sent:', orderData);\n      console.log('Cart data:', cart);\n      console.log('Table info:', tableInfo);\n\n      const orderResponse = await createOrder(orderData);\n      console.log('‚úÖ Order response received:', orderResponse);\n      console.log('üìã Full order response structure:', JSON.stringify(orderResponse, null, 2));\n      \n      const orderId = orderResponse?.order?.id;\n      const orderNumber = orderResponse?.order?.order_number;\n      const isMerged = orderResponse?.merged || false;\n      \n      console.log('üìã Extracted order details:', { orderId, orderNumber, isMerged });\n      \n      if (!orderId) {\n        console.error('‚ùå No order ID found in response');\n        throw new Error('Order ID not found in response');\n      }\n      \n      // Clear cart and customer info after successful order\n      setCart([]);\n      setCustomerName('');\n      setSpecialInstructions('');\n      localStorage.removeItem(`cart_${qrCode}`);\n      localStorage.removeItem(`customer_${qrCode}`);\n      localStorage.removeItem(`instructions_${qrCode}`);\n      \n      // Show appropriate success message based on whether items were merged\n      if (isMerged) {\n        toast.success('Items added to your existing order successfully!');\n      } else {\n        toast.success('Order placed successfully!');\n      }\n      \n      // Navigate to unified dashboard page\n      const dashboardUrl = `/dashboard?orderId=${orderId}&table=${tableInfo?.table_number}&customerName=${encodeURIComponent(customerName)}&orderNumber=${orderNumber || ''}&totalAmount=${getTotalAmount().toFixed(2)}`;\n      console.log('üöÄ Navigating to:', dashboardUrl);\n      window.location.href = dashboardUrl;\n      \n    } catch (error) {\n      console.error('Error placing order:', error);\n      console.error('Error response:', error.response?.data);\n      console.error('Error status:', error.response?.status);\n      toast.error(error.response?.data?.error || 'Failed to place order. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleContinueShopping = () => {\n    navigate(`/qr/${qrCode}`);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-sangeet-neutral-950 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"spinner mx-auto mb-4\"></div>\n          <p className=\"text-sangeet-400\">Loading your cart...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-sangeet-neutral-950\">\n      {/* Professional Header */}\n      <div className=\"bg-gradient-to-r from-sangeet-neutral-900 to-sangeet-neutral-800 border-b border-sangeet-neutral-700 p-4 sticky top-0 z-50\">\n        <div className=\"max-w-4xl mx-auto\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <button\n                onClick={handleContinueShopping}\n                className=\"w-10 h-10 bg-sangeet-neutral-700 rounded-full flex items-center justify-center hover:bg-sangeet-neutral-600 transition-colors\"\n              >\n                <span className=\"text-sangeet-400 text-lg\">‚Üê</span>\n              </button>\n              <div>\n                <h1 className=\"text-xl font-bold text-sangeet-400\">Your Cart</h1>\n                <p className=\"text-sangeet-neutral-400 text-sm\">\n                  Table {tableInfo?.table_number} ‚Ä¢ {cart.length} item{cart.length !== 1 ? 's' : ''}\n                </p>\n              </div>\n            </div>\n            <div className=\"text-right\">\n              <div className=\"text-sangeet-400 font-bold text-lg\">\n                ${getTotalAmount().toFixed(2)}\n              </div>\n              <div className=\"text-sangeet-neutral-400 text-sm\">\n                Total Amount\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-4xl mx-auto p-4\">\n        {/* Customer Information */}\n        <div className=\"bg-gradient-to-r from-sangeet-neutral-900 to-sangeet-neutral-800 rounded-xl p-6 mb-6 border border-sangeet-neutral-700\">\n          <h2 className=\"text-lg font-semibold text-sangeet-400 mb-4 flex items-center\">\n            <span className=\"mr-2\">üë§</span>\n            Your Information\n          </h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sangeet-neutral-300 text-sm mb-2 font-medium\">Name *</label>\n              <input\n                type=\"text\"\n                value={customerName}\n                onChange={(e) => setCustomerName(e.target.value)}\n                className=\"w-full px-4 py-3 bg-sangeet-neutral-800 border border-sangeet-neutral-600 rounded-lg text-sangeet-300 focus:outline-none focus:border-sangeet-400 focus:ring-2 focus:ring-sangeet-400/20 transition-all\"\n                placeholder=\"Enter your name\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sangeet-neutral-300 text-sm mb-2 font-medium\">Special Instructions</label>\n              <input\n                type=\"text\"\n                value={specialInstructions}\n                onChange={(e) => setSpecialInstructions(e.target.value)}\n                className=\"w-full px-4 py-3 bg-sangeet-neutral-800 border border-sangeet-neutral-600 rounded-lg text-sangeet-300 focus:outline-none focus:border-sangeet-400 focus:ring-2 focus:ring-sangeet-400/20 transition-all\"\n                placeholder=\"Any special requests?\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Cart Items */}\n        {cart.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <div className=\"text-6xl mb-4\">üõí</div>\n            <h3 className=\"text-xl font-semibold text-sangeet-400 mb-2\">Your cart is empty</h3>\n            <p className=\"text-sangeet-neutral-400 mb-6\">Add some delicious items to get started!</p>\n            <button\n              onClick={handleContinueShopping}\n              className=\"bg-sangeet-400 text-sangeet-neutral-950 px-8 py-3 rounded-lg font-semibold hover:bg-sangeet-300 transition-colors shadow-lg hover:shadow-xl\"\n            >\n              Continue Shopping\n            </button>\n          </div>\n        ) : (\n          <>\n            <div className=\"bg-gradient-to-r from-sangeet-neutral-900 to-sangeet-neutral-800 rounded-xl p-6 mb-6 border border-sangeet-neutral-700\">\n              <h2 className=\"text-lg font-semibold text-sangeet-400 mb-4 flex items-center\">\n                <span className=\"mr-2\">üçΩÔ∏è</span>\n                Your Order Items\n              </h2>\n              <div className=\"space-y-4\">\n                {cart.map((item) => (\n                  <motion.div\n                    key={item.menu_item_id}\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    className=\"flex items-center justify-between bg-sangeet-neutral-800 rounded-lg p-4\"\n                  >\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-sangeet-400 font-semibold\">{item.name}</h3>\n                      <p className=\"text-sangeet-neutral-400 text-sm\">${item.price} each</p>\n                    </div>\n                    <div className=\"flex items-center gap-4\">\n                      <div className=\"flex items-center gap-3\">\n                        <button\n                          onClick={() => updateQuantity(item.menu_item_id, item.quantity - 1)}\n                          className=\"w-8 h-8 bg-sangeet-neutral-700 text-sangeet-400 rounded-full flex items-center justify-center hover:bg-sangeet-neutral-600 transition-colors\"\n                        >\n                          -\n                        </button>\n                        <span className=\"text-sangeet-400 font-medium w-8 text-center\">{item.quantity}</span>\n                        <button\n                          onClick={() => updateQuantity(item.menu_item_id, item.quantity + 1)}\n                          className=\"w-8 h-8 bg-sangeet-neutral-700 text-sangeet-400 rounded-full flex items-center justify-center hover:bg-sangeet-neutral-600 transition-colors\"\n                        >\n                          +\n                        </button>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"text-sangeet-400 font-semibold\">\n                          ${(parseFloat(item.price) * item.quantity).toFixed(2)}\n                        </div>\n                      </div>\n                      <button\n                        onClick={() => removeFromCart(item.menu_item_id)}\n                        className=\"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center hover:bg-red-700 transition-colors\"\n                      >\n                        √ó\n                      </button>\n                    </div>\n                  </motion.div>\n                ))}\n              </div>\n            </div>\n\n            {/* Order Summary */}\n            <div className=\"bg-gradient-to-r from-sangeet-neutral-900 to-sangeet-neutral-800 rounded-xl p-6 mb-6 border border-sangeet-neutral-700\">\n              <h2 className=\"text-lg font-semibold text-sangeet-400 mb-4 flex items-center\">\n                <span className=\"mr-2\">üìã</span>\n                Order Summary\n              </h2>\n              <div className=\"space-y-3\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sangeet-neutral-400\">Items ({cart.length})</span>\n                  <span className=\"text-sangeet-400\">{cart.reduce((total, item) => total + item.quantity, 0)}</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sangeet-neutral-400\">Subtotal</span>\n                  <span className=\"text-sangeet-400\">${getTotalAmount().toFixed(2)}</span>\n                </div>\n                <div className=\"border-t border-sangeet-neutral-700 pt-3\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-sangeet-400 font-semibold\">Total</span>\n                    <span className=\"text-sangeet-400 font-bold text-xl\">${getTotalAmount().toFixed(2)}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Action Buttons */}\n            <div className=\"flex flex-col sm:flex-row gap-4\">\n              <button\n                onClick={handleContinueShopping}\n                className=\"flex-1 bg-sangeet-neutral-700 text-sangeet-400 px-8 py-4 rounded-lg font-semibold hover:bg-sangeet-neutral-600 transition-colors\"\n              >\n                Continue Shopping\n              </button>\n              <button\n                onClick={handleSubmitOrder}\n                disabled={isSubmitting || cart.length === 0}\n                className=\"flex-1 bg-sangeet-400 text-sangeet-neutral-950 px-8 py-4 rounded-lg font-semibold hover:bg-sangeet-300 transition-colors disabled:opacity-50 shadow-lg hover:shadow-xl\"\n              >\n                {isSubmitting ? 'Placing Order...' : 'Place Order'}\n              </button>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default QRCartPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}